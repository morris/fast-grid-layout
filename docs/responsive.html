<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Fast Grid Layout: Responsive Breakpoints</title>
    <meta
      name="description"
      content="Fast editable grid layout system similar to React Grid Layout. Performant even at hundreds of items. Vanilla/framework-agnostic."
    />

    <link rel="stylesheet" href="./css/fast-grid-layout.css" />
    <link rel="stylesheet" href="./css/demo.css" />
  </head>
  <body>
    <div class="demo-column">
      <h1>Fast Grid Layout: Responsive Breakpoints</h1>

      <nav>
        <p>
          Demos:
          <a href=".">Vanilla</a> | <strong>Responsive Breakpoints</strong> |
          <a href="./react.html">React</a>
        </p>
      </nav>

      <p>
        Resize the viewport to switch between 3 breakpoints with individual
        layouts.
      </p>

      <div class="demo-container -responsive">
        <div class="fast-grid-layout"></div>
      </div>
    </div>

    <script type="module">
      import { GridLayout } from './js/fast-grid-layout.js';
      import { generateDemoLayout } from './js/demo.js';
      import { reconcile } from 'https://cdn.jsdelivr.net/npm/exdom@2/dist/exdom.min.js';

      const container = document.querySelector('.fast-grid-layout');

      const items = [];

      for (let i = 0; i < 50; ++i) items.push(i.toString());

      reconcile({
        container,
        items,
        create(item) {
          const i = parseInt(item);
          const element = document.createElement('div');
          element.dataset.key = item;
          element.className = `demo-item -style${(i % 16) + 1}`;
          element.innerHTML = `<h2>${i + 101}</h2>`;

          if (i % 5 === 3) {
            element.innerHTML += '<p class="content">Example content</p>';
          }

          if (item.static) {
            element.innerHTML += '<p class="content">(Static item)</p>';
          }

          return element;
        },
      });

      const gridLayout = new GridLayout(container, {
        columns: 12,
        rowHeight: 40,
        gap: 10,
        breakpoints: {
          sm: { maxWidth: 640, columns: 4, gap: 5, rowHeight: 30 },
          md: { maxWidth: 1024, columns: 8, gap: 10 },
        },
      });

      gridLayout.setEditable(true);

      gridLayout.onLayoutChange((layout, breakpoint) => {
        console.log(`Layout changed for breakpoint ${breakpoint}`);
      });

      gridLayout.setLayout(generateDemoLayout(items.length, 12, true));
    </script>
  </body>
</html>
